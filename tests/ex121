#!/bin/env bats

setup() {
  bats_load_library bats-file
  bats_load_library bats-assert
  bats_load_library bats-support
}

# Basic entab functionality tests

@test "1. Seven spaces to next tab stop: ex121 <<< 'a       b'" {
    run ex121 <<< 'a       b'
    assert_success
    assert_output $'atb'
}

@test "2. Leading eight spaces: ex121 <<< '        hello'" {
    run ex121 <<< '        hello'
    assert_success
    assert_output $'thello'
}

@test "3. Sixteen spaces to two tabs: ex121 <<< '                b'" {
    run ex121 <<< '                b'
    assert_success
    assert_output $'ttb'
}

@test "4. Partial spaces preserved: ex121 <<< 'a   b'" {
    run ex121 <<< 'a   b'
    assert_success
    assert_output "a   b"
}

@test "5. Six spaces to next tab stop: ex121 <<< 'ab      c'" {
    run ex121 <<< 'ab      c'
    assert_success
    assert_output $'abtc'
}

@test "6. No spaces present: ex121 <<< 'hello world'" {
    run ex121 <<< 'hello world'
    assert_success
    assert_output "hello world"
}

@test "7. Preserve existing tabs: ex121 <<< 'atb'" {
    run ex121 <<< $'atb'
    assert_success
    assert_output $'atb'
}

@test "8. Multiple tab stops: ex121 <<< 'a       b      c'" {
    run ex121 <<< 'a       b       c'
    assert_success
    assert_output $'atbtc'
}

@test "9. Mixed tabs and spaces: ex121 <<< 'atb       c'" {
    run ex121 <<< $'atb       c'
    assert_success
    assert_output $'atbtc'
}

@test "10. Single space preserved: ex121 <<< 'a b'" {
    run ex121 <<< 'a b'
    assert_success
    assert_output "a b"
}
