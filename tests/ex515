#!/bin/python3

"""Test for 5-15 task."""

from functools import partial

from common import Test, Tests, run_tests

EXE = 'ex515'


def _case_ignore_sorted(
    lines: str,
    *,
    numeric: bool = False,
    reverse: bool = False,
) -> bool:
    return False


tests: Tests = (
  Test(1, # Basic case-insensitive sort with -f
  'Apple\napple\nBanana\nbanana\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(2, # Mixed case without -f (case sensitive)
  'Apple\napple\nBanana\nbanana\n',
  'Apple\nBanana\napple\nbanana\n',
  0, f'{EXE}'),

  Test(3, # Case-insensitive reverse sort
  'Apple\napple\nBanana\nbanana\n',
  _case_ignore_sorted,
  0, f'{EXE} -rf'),

  Test(4, # Case-insensitive numeric sort
  'Apple\n10\napple\n2\nBanana\n',
  partial(_case_ignore_sorted, numeric=True),
  0, f'{EXE} -fn'),

  Test(5, # All flags together: reverse case-insensitive numeric
  'Apple\n10\napple\n2\nBanana\n',
  partial(_case_ignore_sorted, numeric=True, reverse=True),
  0, f'{EXE} -rfn'),

  Test(6, # Different flag order (should work the same)
  'Apple\napple\nBanana\nbanana\n',
  partial(_case_ignore_sorted, numeric=True),
  0, f'{EXE} -nf'),

  Test(7, # Case differences at word boundaries
  'test\nTEST\nTest\ntEsT\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(8, # Case-insensitive with special characters
  'Apple!\napple?\nApple.\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(9, # Case-insensitive with numbers in strings
  'Test2\ntest1\nTEST10\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(10, # Case-insensitive numeric with mixed case numbers
  'Test\n2a\n10A\n1B\n',
  partial(_case_ignore_sorted, numeric=True),
  0, f'{EXE} -fn'),

  Test(11, # Empty lines with case-insensitive
  'Apple\n\napple\nBanana\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(12, # Single character case differences
  'a\nA\nb\nB\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(13, # Case-insensitive with whitespace
  'Apple \napple\n Apple\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(14, # Long strings with case differences
  'verylongstring\nVERYLONGSTRING\nVeryLongString\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(15, # Case-insensitive with identical content
  'same\nsame\nSAME\nSame\n',
  _case_ignore_sorted,
  0, f'{EXE} -f'),

  Test(16, # Invalid flag combination
  'test\n',
  '',
  2, f'{EXE} -fx'),

  Test(17, # Case-insensitive single line
  'OneLine\n',
  'OneLine\n',
  0, f'{EXE} -f'),

  Test(18, # Case-insensitive empty input
  '',
  '',
  0, f'{EXE} -f'),
)

run_tests(tests)
